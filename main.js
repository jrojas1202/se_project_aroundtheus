!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:r}=e;this._name=n,this._link=r,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardDeleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._cardLikeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove()}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardElement=this._getTemplate(),this._cardLikeButton=this._cardElement.querySelector(".card__like-button"),this._cardDeleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e){this._popupElement=document.querySelector(e),this._popupCloseButton=this._popupElement.querySelector(".modal__close")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupCloseButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal")&&this.close()}))}}class s extends t{constructor(e,t){super(e),this._form=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._form.querySelectorAll(".modal__input").forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this._submitHandler)}_submitHandler=e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t)};close(){super.close(),this._form.reset()}}var n=class{constructor(e,t){this._formSelector=e.formSelector,this.inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e._inputErrorClass,this._errorClass=e._errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(e){return!this._inputElements.every((e=>e.validity.valid))}_disableButton(){this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass)}_enableButton(){this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)}_toggleButtonState(){if(this._hasInvalidInput())return this._disableButton();this._enableButton()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this._disableButton()}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};const r={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__error",errorClass:"modal__error_visible"};var o;o=r,[...document.querySelectorAll(o.formSelector)].forEach((e=>{e.addEventListener("submit",(e=>{e.preventDefault()})),function(e,t){const{inputSelector:s,submitButtonSelector:n}=t,r=[...e.querySelectorAll(s)],o=e.querySelector(n);r.forEach((s=>{s.addEventListener("input",(n=>{!function(e,t,s){t.validity.valid?function(e,t,s){let{inputErrorClass:n,errorClass:r}=s;const o=e.querySelector(`#${t.id}-error`);t.classList.remove(n),o&&(o.textContent="",o.classList.remove(r))}(e,t,s):function(e,t,s){let{inputErrorClass:n,errorClass:r}=s;const o=e.querySelector(`#${t.id}-error`);t.classList.add(n),o&&(o.textContent=t.validationMessage,o.classList.add(r))}(e,t,s)}(e,s,t),function(e,t,s){const{inactiveButtonClass:n}=s,r=(e=>e.every((e=>e.validity.valid)))(e);r?function(e,t){e.classList.remove(t),e.disabled=!1}(t,n):function(e,t){e.classList.add(t),e.disabled=!0}(t,n)}(r,o,t)}))}))}(e,o)}));const i=document.querySelector("#new-card-modal").querySelector(".modal__form"),a=document.querySelector("#profile-title-input"),l=document.querySelector("#profile-description-input"),c=document.querySelector(".cards__list"),u=document.querySelector(".profile__edit-button"),d=document.querySelector(".profile__add-button"),m=(document.querySelector(".modal__input-title"),document.querySelector(".modal__input-link"),document.querySelector("#new-card-modal"),document.querySelector("#profile-edit-modal").querySelector(".modal__form")),_=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=h(e);_.addItem(t)}},c);function h(t){return new e(t,"#card-template",p).getView()}function p(e){v.open(e)}_.renderItems();const E=new class{constructor(e){this.nameElement=document.querySelector(e.userNameSelector),this.jobElement=document.querySelector(e.userTitleSelector)}getUserInfo(){return{name:this.nameElement.textContent,job:this.jobElement.textContent}}setUserInfo(e){this.nameElement.textContent=e.name,this.jobElement.textContent=e.job}}({userNameSelector:".profile__title",userTitleSelector:".profile__description"}),v=new class extends t{constructor(e){super(e),this._containerImage=this._popupElement.querySelector(".modal__container-image"),this._containerImageTitle=this._popupElement.querySelector(".modal__image_title")}open(e){let{name:t,link:s}=e;const n=this._containerImage.querySelector(".modal__image");this._containerImageTitle.textContent=t,n.alt=t,n.src=s,super.open()}}("#image-modal",(function(e){v.open(e)}));v.setEventListeners();const f=new s("#profile-edit-modal",(function(e){E.setUserInfo(e),f.close()}));f.setEventListeners(),u.addEventListener("click",(()=>{!function(){const e=E.getUserInfo();a.value=e.name,l.value=e.job,f.open()}()}));const S=new s("#new-card-modal",(function(e){const t=h(e);_.addItem(t),S.close()}));S.setEventListeners(),d.addEventListener("click",(()=>{y.resetValidation(),S.open()})),new n(r,m).enableValidation();const y=new n(r,i);y.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMzQix1QkFlRixTQUFpQ2EsR0FDL0J3RSxFQUFTUSxZQUFZaEYsR0FDckJxRixFQUFpQjFHLE9BQ25CLElBZkEwRyxFQUFpQnRHLG9CQUNqQnNFLEVBQWtCbkcsaUJBQWlCLFNBQVMsTUFJNUMsV0FDRSxNQUFNK0gsRUFBT1QsRUFBU00sY0FDdEI1QixFQUFjckQsTUFBUW9GLEVBQUt4SSxLQUMzQjBHLEVBQXFCdEQsTUFBUW9GLEVBQUtGLElBQ2xDTSxFQUFpQjdHLE1BQ25CLENBUkU4RyxFQUF3QixJQWdCMUIsTUFBTUMsRUFBZSxJQUFJcEcsRUFBYyxtQkFPdkMsU0FBNkJhLEdBQzNCLE1BQU13RixFQUFVbkIsRUFBV3JFLEdBQzNCd0QsRUFBUVMsUUFBUXVCLEdBQ2hCRCxFQUFhNUcsT0FDZixJQVZBNEcsRUFBYXhHLG9CQUNidUUsRUFBY3BHLGlCQUFpQixTQUFTLEtBQ3RDdUksRUFBcUIxRCxrQkFDckJ3RCxFQUFhL0csTUFBTSxJQVdZLElBQUlrSCxFQUNuQ3hELEVBQ0FxQixHQUV1QnRCLG1CQUV6QixNQUFNd0QsRUFBdUIsSUFBSUMsRUFBY3hELEVBQW9CZSxHQUNuRXdDLEVBQXFCeEQsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPVxyXG4gICAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcclxuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKS5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB2YWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9zdWJtaXRIYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIF9zdWJtaXRIYW5kbGVyID0gKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKTtcclxuICB9O1xyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLl9pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuX2Vycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dEVsZW1lbnRzKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXHJcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7IC8vIG1vdmUgdG8gdGhlIGNvbnN0cnVjdG9yXHJcblxyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsIi8vRXJyb3IgRnVuY3Rpb25zXHJcblxyXG5mdW5jdGlvbiBzaG93SW5wdXRFcnJvcihcclxuICBmb3JtRWxlbWVudCxcclxuICBpbnB1dEVsZW1lbnQsXHJcbiAgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfVxyXG4pIHtcclxuICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICk7XHJcblxyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XHJcblxyXG4gIGlmIChlcnJvck1lc3NhZ2VFbGVtZW50KSB7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGVycm9yQ2xhc3MpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGlkZUlucHV0RXJyb3IoXHJcbiAgZm9ybUVsZW1lbnQsXHJcbiAgaW5wdXRFbGVtZW50LFxyXG4gIHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH1cclxuKSB7XHJcbiAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICApO1xyXG5cclxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShpbnB1dEVycm9yQ2xhc3MpO1xyXG5cclxuICBpZiAoZXJyb3JNZXNzYWdlRWxlbWVudCkge1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBWQUxJREFUSU9OIE9GIElOUFVUXHJcblxyXG5mdW5jdGlvbiBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgb3B0aW9ucykge1xyXG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBvcHRpb25zKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxufVxyXG5cclxuLy8gZGlzYWJsZSBidXR0b24gZnVuY3Rpb25zXHJcbmZ1bmN0aW9uIGRpc2FibGVCdXR0b24oc3VibWl0QnV0dG9uLCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKSB7XHJcbiAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxufVxyXG5cclxuLy8gZW5hYmxlIGJ1dHRvbiBmdW5jdGlvblxyXG5mdW5jdGlvbiBlbmFibGVCdXR0b24oc3VibWl0QnV0dG9uLCBpbmFjdGl2ZUJ1dHRvbkNsYXNzKSB7XHJcbiAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbn1cclxuXHJcbi8vIFRPR0dMRSBCVVRUT05cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxlbWVudHMsIHN1Ym1pdEJ1dHRvbiwgdmFsaWRhdGlvbkNvbmZpZykge1xyXG4gIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdmFsaWRhdGlvbkNvbmZpZztcclxuXHJcbiAgY29uc3QgY2hlY2tGb3JtVmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50cykgPT5cclxuICAgIGlucHV0RWxlbWVudHMuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuXHJcbiAgY29uc3QgaXNGb3JtVmFsaWQgPSBjaGVja0Zvcm1WYWxpZGl0eShpbnB1dEVsZW1lbnRzKTtcclxuICBpZiAoaXNGb3JtVmFsaWQpIHtcclxuICAgIGVuYWJsZUJ1dHRvbihzdWJtaXRCdXR0b24sIGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKHN1Ym1pdEJ1dHRvbiwgaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBzZXRFdmVudExpc3RlbmVyIEZVTkNUSU9OXHJcblxyXG5mdW5jdGlvbiBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgb3B0aW9ucykge1xyXG4gIGNvbnN0IHsgaW5wdXRTZWxlY3Rvciwgc3VibWl0QnV0dG9uU2VsZWN0b3IgfSA9IG9wdGlvbnM7XHJcbiAgY29uc3QgaW5wdXRFbGVtZW50cyA9IFsuLi5mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGlucHV0U2VsZWN0b3IpXTtcclxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgaW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0RWxlbWVudHMsIHN1Ym1pdEJ1dHRvbiwgb3B0aW9ucyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihvcHRpb25zKSB7XHJcbiAgY29uc3QgZm9ybUVsZW1lbnRzID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob3B0aW9ucy5mb3JtU2VsZWN0b3IpXTtcclxuICBmb3JtRWxlbWVudHMuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIG9wdGlvbnMpO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBDb25maWdcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvblNldHRpbmdzKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1jYXJkLW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuIiwiZXhwb3J0IGNvbnN0IHVzZXJOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCB1c2VyRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG4vLyBDQVJEU1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZERhdGEgPSB7XHJcbiAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZFNlbGVjdG9yID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkVGl0bGVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0LXRpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEltYWdlTGlua0ZpZWxkID1cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dC1saW5rXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LWNhcmQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiIsImltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgcG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge1xyXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcclxuICBhZGRDYXJkRm9ybSxcclxuICBhZGRDYXJkTW9kYWwsXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHVzZXJOYW1lSW5wdXQsXHJcbiAgdXNlckRlc2NyaXB0aW9uSW5wdXQsXHJcbiAgY2FyZHNMaXN0LFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBjYXJkRGF0YSxcclxuICBjYXJkU2VsZWN0b3IsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBhZGRDYXJkVGl0bGVGaWVsZCxcclxuICBhZGRDYXJkSW1hZ2VMaW5rRmllbGQsXHJcbiAgcHJvZmlsZUVkaXRNb2RhbCxcclxuICBwcm9maWxlRWRpdEZvcm0sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50LmpzXCI7XHJcblxyXG4vL0NBUkQgU0VDVElPTlxyXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gICAgICBzZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY2FyZHNMaXN0XHJcbik7XHJcbnNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhjYXJkRGF0YSkge1xyXG4gIHByZXZpZXdJbWFnZVBvcHVwLm9wZW4oY2FyZERhdGEpO1xyXG59XHJcblxyXG4vL1VTRVIgSU5GT1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICB1c2VyVGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxufSk7XHJcblxyXG4vL1BvcFVwV2l0aEltYWdlXHJcbmNvbnN0IHByZXZpZXdJbWFnZVBvcHVwID0gbmV3IHBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIsIGhhbmRsZUltYWdlQ2xpY2spO1xyXG5wcmV2aWV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xyXG4gIHByZXZpZXdJbWFnZVBvcHVwLm9wZW4oY2FyZERhdGEpO1xyXG59XHJcblxyXG4vL1BvcFVwV2l0aEZvcm1cclxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0XHJcbik7XHJcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBoYW5kbGVQcm9maWxlRWRpdENsaWNrKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRDbGljaygpIHtcclxuICBjb25zdCB1c2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICB1c2VyTmFtZUlucHV0LnZhbHVlID0gdXNlci5uYW1lO1xyXG4gIHVzZXJEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlci5qb2I7XHJcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuLy8gQWRkIENhcmQgTW9kYWxcclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbmV3LWNhcmQtbW9kYWxcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQoaW5wdXRWYWx1ZXMpO1xyXG4gIHNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxufVxyXG5cclxuLy8gRk9STSBWQUxJREFUSU9OXHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICB2YWxpZGF0aW9uU2V0dGluZ3MsXHJcbiAgcHJvZmlsZUVkaXRGb3JtXHJcbik7XHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgYWRkQ2FyZEZvcm0pO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3RvcnMpIHtcclxuICAgIHRoaXMubmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy51c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnVzZXJUaXRsZVNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLmpvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8odXNlcikge1xyXG4gICAgdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXIubmFtZTtcclxuICAgIHRoaXMuam9iRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXIuam9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2NvbnRhaW5lckltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19jb250YWluZXItaW1hZ2VcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NvbnRhaW5lckltYWdlVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2ltYWdlX3RpdGxlXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICBjb25zdCBpbWFnZSA9IHRoaXMuX2NvbnRhaW5lckltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fY29udGFpbmVySW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBpbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgaW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jYXJkTGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfY2FyZERlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX3BvcHVwQ2xvc2VCdXR0b24iLCJvcGVuIiwiYWRkIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImlucHV0IiwidmFsdWUiLCJfc3VibWl0SGFuZGxlciIsInByZXZlbnREZWZhdWx0IiwiaW5wdXRWYWx1ZXMiLCJyZXNldCIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dEVsZW1lbnRzIiwiX2lucHV0RWxlbWVudHMiLCJldmVyeSIsIl9kaXNhYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInJlc2V0VmFsaWRhdGlvbiIsIl9pbnB1dFNlbGVjdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInZhbGlkYXRpb25TZXR0aW5ncyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJvcHRpb25zIiwic3VibWl0QnV0dG9uIiwiX3JlZjIiLCJoaWRlSW5wdXRFcnJvciIsInNob3dJbnB1dEVycm9yIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRhdGlvbkNvbmZpZyIsImlzRm9ybVZhbGlkIiwiY2hlY2tGb3JtVmFsaWRpdHkiLCJlbmFibGVCdXR0b24iLCJkaXNhYmxlQnV0dG9uIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJhZGRDYXJkRm9ybSIsInVzZXJOYW1lSW5wdXQiLCJ1c2VyRGVzY3JpcHRpb25JbnB1dCIsImNhcmRzTGlzdCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsInByb2ZpbGVFZGl0Rm9ybSIsInNlY3Rpb24iLCJjb250YWluZXIiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY2FyZERhdGEiLCJjYXJkIiwiY3JlYXRlQ2FyZCIsImhhbmRsZUNhcmRDbGljayIsInByZXZpZXdJbWFnZVBvcHVwIiwidXNlckluZm8iLCJzZWxlY3RvcnMiLCJuYW1lRWxlbWVudCIsInVzZXJOYW1lU2VsZWN0b3IiLCJqb2JFbGVtZW50IiwidXNlclRpdGxlU2VsZWN0b3IiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwidXNlciIsIl9jb250YWluZXJJbWFnZSIsIl9jb250YWluZXJJbWFnZVRpdGxlIiwiaW1hZ2UiLCJwcm9maWxlRWRpdFBvcHVwIiwiaGFuZGxlUHJvZmlsZUVkaXRDbGljayIsImFkZENhcmRQb3B1cCIsIm5ld0NhcmQiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9